\input{../article_base.tex}
\title{פתרון מטלה 07 --- מבוא ללוגיקה, 80423}

\begin{document}
\maketitle
\maketitleprint{}

\question{}
יהיו $mathcal{A, B}$ מבנים ל־$L$ ויהי איזומורפיזם $f : \mathcal{A} \to \mathcal{B}$ ושם עצם $t \in term_L$. \\*
נוכיח שלכל השמה $\sigma : Var \to A$ מתקיים
\[
	f(t^\mathcal{A}(\sigma))
	= t^\mathcal{B}(f \circ \sigma)
\]
\begin{proof}
	נוכיח את הטענה באינדוקציה על שמות עצם. \\*
	נניח כי $t \in const_L$, ולכן מהגדרה של איזומורפיזם ושל השמה על קבועים
	\[
		f(t^\mathcal{A}(\sigma))
		= f(t^\mathcal{A})
		= t^\mathcal{B}
		= t^\mathcal{B}(f \circ \sigma)
	\]
	נניח ש־$t \in Var$ ולכן מאותן ההגדרות נובע
	\[
		f(t^\mathcal{A}(\sigma))
		= f(\sigma(t))
		= t^\mathcal{B}(f \circ \sigma)
	\]
	והשלמנו את בסיס האינדוקציה, נותר לבדוק את המהלך. \\*
	יהי $n \in \NN$ ויהי $F \in Func_{L, n}$ סימן פונקציה $n$־מקומי, ונניח $t_0, \dots, t_{n - 1} \in term_L$ כך שהם מקיימים את טענת האינדוקציה, אז. \\*
	נגדיר $t = F(t_0, \dots, t_{n - 1})$ ולכן מהגדרת איזומורפיזם, השמה עבור סימני פונקציה ויחד עם הנחת האינדוקציה נובע
	\[
		f(t^\mathcal{A}(\sigma))
		= f(F^\mathcal{A}(t_0^\mathcal{A}(\sigma), \dots, t_{n - 1}^\mathcal{B}(\sigma)))
		= F^\mathcal{B}(f(t_0^\mathcal{A}(\sigma)), \dots, f(t_{n - 1}^\mathcal{B}(\sigma)))
		= F^\mathcal{B}(t_0^\mathcal{B}(f \circ \sigma), \dots, t_{n - 1}^\mathcal{B}(f \circ \sigma))
		= t^\mathcal{B}(f \circ \sigma)
	\]
	והשלמנו את מהלך האינדוקציה.
\end{proof}

\question{}
נניח ש־$L$ מכילה אינסוף סימני יחס חד־מקומיים ${\{P_n\}}_{n \in \NN}$. \\*
יהי מבנה $\mathcal{A} = \langle A, I \rangle$ כך ש־$A = \{0\}$ ו־$P_n^\mathcal{A} = \emptyset$ לכל $n \in \NN$. \\*
נוכיח שלכל פסוק $\varphi \in sent_L$ כך ש־$\mathcal{A} \models \varphi$ קיים מבנה $\mathcal{B}$ ל־$L$ כך ש־$\mathcal{B} \models \varphi$ וגם $\mathcal{A} \not\cong \mathcal{B}$.
\begin{proof}
	יהי פסוק $\varphi$ כזה, ונגדיר $X_p = \{P_n \mid P_n \in \varphi\}$, קבוצת סימני היחס אשר מופיעים ב־$\varphi$ (בסימון זה התייחסנו ל־$\varphi$ כסדרה). \\*
	יהי $k \in \NN \setminus \{i \in \NN \mid P_i \in X_p\}$ כלשהו (הגדרה זו לא מצריכה בחירה). \\*
	נגדיר מבנה חדש $\mathcal{B} = \langle A, J\rangle$ כך ש־$I = J$ מלבד $P_k^\mathcal{B} = A \times A$. \\*
	נוכל להוכיח באינדוקציה על יחסים שמתקיים $\mathcal \models \varphi$, אבל עבור הפסוק $\phi = \forall x\ P_k(x)$ נקבל $\mathcal{A} \not\models \phi$ בעוד $\mathcal{B} \models \phi$ ולכן בפרט $\mathcal{A} \not\cong \mathcal{B}$.
\end{proof}

\question{}
יהיו $\mathcal{A} \subseteq \mathcal{B}$ מבנים ל־$L$ ויהי $\psi$ פסוק ללא כמתים ו־$\varphi$ פסוק כך שעבור המשתנים $x_0, \dots, x_{k - 1} \in Var$ מתקיים $\varphi = \forall x_0, \dots, \forall x_{k - 1} \psi$.

\subquestion{}
נפריך את הטענה שאם $\mathcal{A} \models \varphi$ אז $\mathcal{B} \models \varphi$.
\begin{solution}
	נגדיר $L$ שפת השוויון ו־$A = \{0\}, B = \{0, 1\}$, ונגדיר גם $\psi(x, y) = x = y$, לכן $\varphi$ מתלכדת עם $\varphi_{\le 1}$ מהמטלה הקודמת. \\*
	בהתאם נבחין כי $\mathcal{A} \models \varphi$ אבל $\mathcal{B} \not\models \varphi$, זאת שכן $\psi(0, 1)$ לא מתקיים.
\end{solution}

\subquestion{}
נוכיח שאם $\mathcal{B} \models \varphi$ אז גם $\mathcal{A} \models \varphi$.
\begin{proof}
	לכל השמה $\sigma : Var \to A$, נובע מהשיכון הנתון ומהעובדה ש־$\psi$ חסר כמתים כי
	\[
		\mathcal{A} \models \psi^\mathcal{A}(\sigma)
		\iff \mathcal{B} \models \psi^\mathcal{B}(\sigma)
		\impliedby \mathcal{B} \models \varphi
	\]
	כאשר הגדרנו את $\sigma$ מחדש כהרחבת הטווח, וכאשר הגרירה האחרונה נובעת מבדיקת הצבה ישירה והגדרת הקיום. \\*
	בהתאם מצאנו כי $\mathcal{A} \models \varphi$.
\end{proof}

\question{}
תהי $S$ מחלקה של מבנים ל־$L$.

\subquestion{}
נניח ש־$\mathcal{A}$ מבנה ל־$L$. \\*
נוכיח שמתקיים $\mathcal{A} \in Mod(Th(S))$ אם ורק אם $\forall \varphi \in Th(\mathcal{A}), \exists \mathcal{B} \in S, \mathcal{B} \models \varphi$.
\begin{proof}
	נניח ש־$\mathcal{A} \in Mod(Th(S))$ ונראה שלכל $\varphi \in Th(\mathcal{A})$ קיים מבנה $\mathcal{B} \in S$ כך ש־$\mathcal{B} \models \varphi$. \\*
	יהי $\varphi$ כזה, מהגדרת $Mod$ אנו יודעים כי $Th(\mathcal{A}) = Th(S)$, ולכן $\forall \mathcal{B} \in S, \mathcal{B} \models \varphi$ בהגדרה, ולכן מספיק שנבחר אחד מהם באופן שרירותי.

	לכיוון ההפוך נניח שלכל $\mathcal{A} \models \varphi$ קיים $\mathcal{B} \in S$ כך שגם $\mathcal{B} \models \varphi$ ונרצה להראות ש־$\mathcal{A} \in Mod(Th(S))$. \\*
	כדי לעשות זאת נרצה להראות ש־$\mathcal{A} \models Th(S)$.
	יהי $\varphi \in Th(S)$. נניח בשלילה ש־$\varphi \notin Th(\mathcal{A})$ ולכן $\mathcal{A} \models \lnot \varphi$ ובהתאם קיים $\mathcal{B} \in S$ כך ש־$\mathcal{B} \models \lnot \varphi$. \\*
	אבל זוהי כמובן סתירה, שכן $\mathcal{B} \models \varphi$, ולכן $\mathcal{A} \models \varphi$, ונסיק כי $\mathcal{A} \models Th(S)$.
\end{proof}

\subquestion{}
נניח ש־$L = \{ R \}$ עבור $R$ סימן יחס דו־מקומי. \\*
נניח ש־$S$ היא מחלקת המבנים הסופיים $\mathcal{B}$ ל־$L$ כך ש־$R^\mathcal{B}$ הוא יחס סדר קווי על $B$. \\*
נראה ש־$Mod(Th(S))$ היא לא מחלקת הקבוצות הסדורות קווית על־ידי דוגמה נגדית.
\begin{solution}
	נבחן את $\mathcal{A} = \langle \ZZ, \le \rangle$ השלמים יחד עם הסדר הרגיל שלהם. \\*
	זהו כמובן מבנה של קבוצה סדורה קווית, ולכן $\mathcal{A} \in Mod(Th(S))$ אם זו האחרונה מחלקת הקבוצות הסדורות קווית. \\*
	מצד שני, כל מבנה ב־$S$ הוא סופי ולכן מקיים את תכונת קיום מינימום, קרי $\varphi = \exists x, \forall y, R(x, y)$, וכן $\varphi \in Th(S)$ בהתאם. \\*
	אבל $\mathcal{A} \models \lnot \varphi$, כלומר אין איבר שהוא מינימום ב־$\ZZ$, ולכן בפרט המחלקה לעיל איננה מחלקת הקבוצות הסדורות קווית.
\end{solution}

\subquestion{}
תהי $L$ השפה מהסעיף הקודם ונניח ש־$S$ היא מחלקת המבנים הסופיים ל־$L$. \\*
נסתור את הטענה ש־$Mod(Th(S))$ היא מחלקת המבנים ל־$L$.
\begin{solution}
	נגדיר $\phi = \forall x, y, z (R(x, x) \land (R(x, y) \land R(y, x) \to x = y) \land ((R(x, y) \land R(y, z)) \to R(x, z)) \land (R(x, y) \lor R(y, x)))$ פסוק המתקיים אם ורק אם $R$ יחס סדר קווי.
	נשתמש ב־$\varphi$ מהסעיף הקודם ונגדיר $\psi = \phi \to \varphi$ הפסוק שמתאר שאם $R$ יחס סדר קווי, אז יש לו מינימום. \\*
	כל מבנה ב־$S$ מקיים את $\varphi$ ולכן נוכל להשתמש באותה הדוגמה בדיוק של הסעיף הקודם ונקבל סתירה, דהינו $Mod(Th(S))$ לא מחלקת כל המבנים ל־$L$.
\end{solution}

\question{}
יהי $t \in term_L$ שם עצם ללא משתנים ויהי $x \in Var$.

\subquestion{}
נוכיח שלכל נוסחה $\varphi \in form_L$ שם העצם $t$ כשר להצבה במקום $x$ ב־$\varphi$.
\begin{proof}
	נוכיח באינדוקציה על מבנה הנוסחה. \\*
	נניח ש־$\varphi = R(t_0, \dots, t_{n - 1})$ נוסחה אטומית כך ש־$R \in Rel_{L, n}$ ו־$t_0, \dots, t_{n - 1} \in term_L$.
	אז מהגדרת כשרות להצבה נובע שההצבה אכן כשרה.

	נעבור למהלך האינדוקציה.
	למעשה, מהגדרת כשרות להצבה, הצבה ביחסים דו־מקומיים החד־מקומי הם חוקיים תחת הנחת האינדוקציה, ולכן מספיק שנבחן את המקרה של כמתים. \\*
	נניח את הנחת האינדוקציה עבור $\psi$ ונבחן את $\varphi = \forall v\ \varphi$.
	נבחין כי ב־$\psi_t^x$ המשתנה $x$ לא מופיע (בהתאם לעובדה שאין משתנים ב־$t$) ולכן אם $x$ משתנה חופשי ב־$\varphi$ אז סיימנו. \\*
	במקרה שבו הוא חופשי $v \ne x$, ולכן נניח ש־$x = v$, ובמקרה זה $x$ לא חופשי ב־$\varphi$ ולכן מההגדרה $\varphi = \varphi_t^x$. \\*
	המקרה עבור $\exists$ זהה, ולכן סיימנו את מהלך האינדוקציה ונובע שתמיד חוקי להציב שם עצם חסר משתנים בנוסחה.
\end{proof}

\subquestion{}
נוכיח שאם בנוסף $FV(\varphi) \subseteq \{x\}$ אז $\varphi_t^x$ פסוק, קרי ההצבה כשרה גם כן.
\begin{proof}
	נפרק למקרים, תחילה נניח ש־$FV(\varphi) = \emptyset$, אז $FV(\varphi_t^x) = \emptyset$, זאת שכן בתהליך לא נוספים משתנים, בטח שלא משתנים חופשיים, כתוצאה של הסעיף הקודם, ולכן גם $\varphi_y^x$ פסוק. \\*
	נניח אם כן ש־$FV(\varphi) = \{x\}$, אבל גם במקרה זה $x \notin FV(\varphi_t^x)$, ולא נוספים משתנים חופשיים אחרים, לכן $FV(\varphi_t^x) = \emptyset$ ו־$\varphi_t^x$ פסוק גם כן.
\end{proof}

\end{document}
