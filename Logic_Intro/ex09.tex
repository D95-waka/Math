\input{../article_base.tex}
\title{פתרון מטלה 09 --- מבוא ללוגיקה, 80423}

\begin{document}
\maketitle
\maketitleprint{}

\question{}
קבוצת פסוקים $\Sigma$ תיקרא קבוצת הינטיקה אם היא מקיימת את התנאים הבאים לכל שני פסוקים $\alpha, \beta$ בשפה.
\begin{enumerate}
	\item אם $P$ פסוק יסודי אז לא יתכן שגם $P$ וגם $\lnot P$ שייכים ל־$\Sigma$.
	\item אם $\lnot (\lnot \alpha) \in \Sigma$ אז גם $\alpha \in \Sigma$.
	\item אם $\alpha \land \beta \in \Sigma$ אז $\alpha, \beta \in \Sigma$ ואם $\lnot (\alpha \land \beta) \in \Sigma$ אז או $\lnot \alpha$ או $\lnot \beta$ ב־$\Sigma$.
	\item אם $\alpha \lor \beta \in \Sigma$ אז או $\alpha \in \Sigma$ או $\beta \in \Sigma$, אם $\lnot (\alpha \lor \beta) \in \Sigma$ אז $\lnot \alpha, \lnot \beta \in \Sigma$.
	\item אם $\alpha \to \beta \in \Sigma$ אז או $\lnot \alpha$ או $\beta$ ב־$\Sigma$, ואם $\lnot (\alpha \to \beta) \in \Sigma$ אז $\alpha, \lnot \beta \in \Sigma$.
	\item אם $\alpha \leftrightarrow \beta \in \Sigma$ אז או $\alpha, \beta \in \Sigma$ או $\lnot \alpha, \lnot \beta \in \Sigma$,
		אם $\lnot (\alpha \leftrightarrow \beta) \in \Sigma$ אז או $\alpha, \lnot \beta \in \Sigma$ או $\lnot \alpha, \beta \in \Sigma$.
\end{enumerate}
נוכיח שאם $\Sigma$ קבוצת הינטיקה אז $\Sigma$ ספיקה.
\begin{proof}
	נגדיר $v : L \to \{ \TT, \FF \}$ על־ידי $v(P) = \TT \iff P \in \Sigma$. \\
	נגדיר $\xi = \forall \varphi (((\varphi \in \Sigma) \implies \bar{v}(\varphi) = \TT) \land ((\lnot \varphi) \in \Sigma \implies \bar{v}(\varphi) = \FF))$, ונוכיח את $\xi$ באינדוקציה על מבנה הפסוק. \\
	לפני שנתחיל נעיר ש־$\xi$ הוא טענה שנכתבה בשפה לוגית מטעמי נוחות, ואנו מתייחסים אליה כטענה ולא כאל נוסחה. \\
	עבור בסיס האינדוקציה יהי $P \in L$ פסוק יסודי, אם $P \in \Sigma$ אז מהגדרה נובע $\bar{v}(P) = \TT$ כמבוקש, ואילו $\lnot P \in \Sigma$ אז $\bar{v}(\lnot P) = V_\lnot(v(P)) = \TT \implies \bar{v}(P) = \FF$.
	נעיר שמתנאי 1 לקבוצות הינטיקה נובע שהמהלך שביצענו מוגדר ולכן השלמנו אם כך את בסיס האינדוקציה ולכן נעבור להוכיח את המהלך.
	נניח ש־$\alpha, \beta$ מקיימים את $\xi$ כהנחה אינדוקטיבית.
	\begin{itemize}
		\item אם $\varphi = \lnot \alpha$ אז אם $\varphi \in \Sigma$ אז $\lnot \alpha \in \Sigma$ ותנאי האינדוקציה חל, נובע $\bar{v}(\alpha) = \FF$, ולכן $\bar{v}(\varphi) = V_\lnot(\bar{v}(\alpha)) = \TT$. \\
			אם $\lnot \varphi \in \Sigma$ אז $\lnot (\lnot \alpha) \in \Sigma$ ולכן מ־1 גם $\alpha \in \Sigma$ ומהנחת האינדוקציה $\bar{v}(\alpha) = \TT$, בהתאם $\bar{v}(\varphi) = V_\lnot(\bar{v}(\alpha)) = \FF$.
		\item אם $\varphi = \alpha \land \beta$ אז אם $\varphi \in \Sigma$ אז מ־3 גם $\alpha, \beta \in \Sigma$ ולכן $\bar{v}(\alpha) = \bar{v}(\beta) = \TT$ ולכן בהכרח $\bar{v}(\varphi) = \TT$. \\
			אם $\lnot \varphi \in \Sigma$ אז מ־3 וללא הגבלת הכלליות גם $\lnot \alpha \in \Sigma$ ולכן $\bar{v}(\alpha) = \FF$ מהנחת האינדוקציה, בהתאם גם $\bar{v}(\varphi) = \FF$. \\
			נבחין כי למעשה יכולנו לסיים את ההוכחה כאן על־ידי שימוש בקבוצת כמתים שלמה של $\land, \lnot$, ניתן אף להוכיח שכלל תנאי קבוצת הינטיקה נובעים משלושת התנאים הראשונים,
			אך נוכיח את מהלך האינדוקציה עבור כלל $\mathcal{B}$ מטעמי פורמליות.
		\item אם $\varphi = \alpha \lor \beta$ אז אם $\varphi \in \Sigma$ אז ללא הגבלת הכלליות גם $\alpha \in \Sigma$ ולכן נובע $\bar{v}(\varphi) = \TT$. \\
			אם $\lnot \varphi \in \Sigma$ אז מ־4 גם $\lnot \alpha, \lnot \beta \in \Sigma$ ולכן נובע $\bar{v}(\varphi) = V_\lor(\bar{v}(\alpha), \bar{v}(\beta)) = \FF$.
		\item אם $\varphi = \alpha \to \beta$ אז אם $\varphi \in \Sigma$ אז מ־5 וללא הגבלת הכלליות גם $\lnot \alpha \in \Sigma$ ולכן נובע $\bar{v}(\varphi) = \TT$. \\
			אם $\lnot \varphi \in \Sigma$ אז נובע $\alpha, \lnot \beta \in \Sigma$ וכן שוב מכללי הערכת אמת נובע $\bar{v}(\varphi) = \FF$.
		\item אם $\varphi = \alpha \leftrightarrow \beta$ אז אם $\varphi \in \Sigma$ אז באופן דומה נפצל למקרים על תנאי 6 מתקבל בהכרח ש־$\bar{v}(\varphi) = \TT$. \\
			אם $\lnot \varphi \in \Sigma$ אז ללא הגבלת הכלליות $\alpha, \lnot \beta \in \Sigma$ ונובע בהכרח $\bar{v}(\varphi) = \FF$.
	\end{itemize}
	השלמנו את מהלך האינדוקציה ולכן $\xi$ מתקיים.
\end{proof}

\question{}
\subquestion[2]
קבוצת פסוקים $\Sigma$ תיקרא עקבית עבור $H$ אם אין פסוק $\alpha$ עבורו $\Sigma \vdash^H \alpha$ וגם $\Sigma \vdash^H \lnot \alpha$. \\
נוכיח שאם $\Sigma$ אינה עקבית עבור $H$ אז לכל פסוק $\beta$ מתקיים $\Sigma \vdash^H \beta$.
\begin{proof}
	נתון ש־$\Sigma$ לא עקבית ולכן קיים $\alpha$ כך ש־$\Sigma \vdash^H \alpha, \lnot \alpha$. \\
	קיימות שתי סדרות יצירה עבור שני היסקים אלה, נשרשר אותן ונשרשר אליהן את הסדרה הבאה (כתובה כרשימה מטעמי קריאות):
	\begin{enumerate}
		\item $\lnot \alpha \to (\lnot \beta \to \lnot \alpha)$, טאוטולוגיה
		\item $\lnot \beta \to \lnot \alpha$, כלל ניתוק
		\item $((\lnot \beta \to \lnot \alpha) \to (\lnot \alpha \to \beta))$, טאוטולוגיה
		\item $\lnot \alpha \to \beta$, כלל הניתוק
		\item $\beta$, כלל הניתוק
	\end{enumerate}
	ולכן $\Sigma \vdash^H \beta$.
\end{proof}

\subquestion{}
נסיק שלכל פסוק $\varphi$ מתקיים $\Sigma \vdash^H \varphi$ אם ורק אם $\Sigma \cup \{ \lnot \varphi \}$ אינה עקבית עבור $H$.
\begin{proof}
	בכיוון הראשון נניח ש־$\Sigma \vdash^H \varphi$, לכן קיימת סדרת יצירה שמתארת זאת, והיא סדרת יצירה גם עבור $\Sigma \cup \{ \lnot \varphi \}$. \\
	אבל $\langle \lnot \varphi \rangle$ סדרת יצירה ב־$\Sigma \cup \{ \lnot \varphi \}$ ולכן לפי ההגדרה היא איננה עקבית עבור $H$.

	לכיוון השני נניח ש־$\Sigma \cup \{ \lnot \varphi \}$ לא עקבית עבור $H$. \\
	מהסעיף הקודם $\Sigma \cup \{ \lnot \varphi \} \vdash^H \lnot (P \to (P \to P))$ עבור $P \in L$ כלשהו. \\
	מטענה מהתרגול נובע $\Sigma \vdash^H \lnot \varphi \to \lnot (P \to (P \to P))$. \\
	מכלל הטאוטולוגיה השלישי ומכלל ניתוק נובע $\Sigma \vdash^H \varphi$.
\end{proof}

\subquestion[5]
ידוע כי כל קבוצת פסוקים $\Sigma$ עקבית היא גם ספיקה. \\
נוכיח את משפט השלמות למערכת ההיסק $H$, לכל קבוצת פסוקים $\Sigma$ ופסוק $\varphi$ המקיימים $\Sigma \models \varphi$ מתקיים $\Sigma \vdash^H \varphi$.
\begin{proof}
	אם $\Sigma$ איננה עקבית אז מהסעיפים הקודמים נובע $\Sigma \vdash^H \varphi$ וסיימנו, לכן נניח ש־$\Sigma$ עקבית. \\
	נסיק אם כן ש־$\Sigma$ ספיקה על־ידי $v : L \to \{ \TT, \FF \}$, כך ש־$\forall P \in L, v(P) = \TT \iff P \in \Sigma$. \\
	מ־$\Sigma \models \varphi$ נסיק גם $\bar{v}(\varphi) = \TT$. \\
	נבחן את $\Sigma \cup \{ \lnot \varphi \}$, אם נניח שהיא עקבית אז היא ספיקה ולכן $\bar{v}(\lnot \varphi) = \bar{v}(\varphi) = \TT$ (הערב: זוהי לא אותה הערכת אמת, אך תכונותיה זהות). \\
	זוהי כמובן סתירה ולכן $\Sigma \cup \{ \lnot \varphi \}$ לא עקבית ולכן מהסעיפים הקודמים $\Sigma \vdash^H \varphi$.
\end{proof}

\question{}
תהי שפה $L$ לתחשיב יחסים ותהי $\varphi \in form_L$.

\subquestion{}
נוכיח שמתקיים $\exists x \varphi \vdash \lnot (\forall x (\lnot \varphi))$.
\begin{proof}
	נבנה עץ היסק ב־KE להוכחת הטענה.
	\begin{enumerate}
		\item $\lnot (\lnot (\forall x (\lnot \varphi)))$
		\item $\forall x (\lnot \varphi)$, כללי שלילה
		\item $\exists x \varphi$, הוספת הנחה
		\item $\varphi^x_c$, כללי קיים, הוספת עד $c$
		\item $\lnot \varphi^x_c$, כללי לכל, הצבה ל־2, וסתירה
	\end{enumerate}
	נבחין כי במהלך האחרון הסתמכנו על הזהות ${(\lnot \varphi)}^x_c = \lnot \varphi^x_c$ אשר הוכחנו שמתקיימת בתרגילים קודמים. \\
	מעץ ההיסק שמצאנו אכן מתקיים $\exists x \varphi \vdash \lnot (\forall x (\lnot \varphi))$.
\end{proof}

\subquestion{}
נוכיח שמתקיים $\forall x \varphi \vdash \lnot (\exists x (\lnot \varphi))$.
\begin{proof}
	כמו בסעיף הקודם נבנה עץ היסק ב־KE עבור הטענה.
	\begin{enumerate}
		\item $\lnot (\lnot (\exists x (\lnot \varphi)))$
		\item $\exists x (\lnot \varphi)$, כללי שלילה
		\item $\varphi_c^x$, כללי קיים, הוספת עד $c$
		\item $\forall x \varphi$, הוספת הנחה
		\item $\varphi_c^x$, כללי לכל, הצבה, וסתירה
	\end{enumerate}
	ומצאנו כי קיים עץ היסק מתאים לטענה.
\end{proof}

\question{}
תהי $\varphi$ נוסחה, $t$ שם עצם קבוע, $x$ משתנה, $c$ ו־$d$ סימני קבוע ב־$L_{P, f}$.

\subquestion{}
נוכיח שמתקיים ${(\varphi_t^x)}_d^c = {(\varphi_d^c)}_{t_d^c}^x$.
\begin{proof}
	תחילה נוכיח טענה שתעזור לנו, נראה שלכל $s \in \operatorname{term}_{L_{P, f}}$ מתקיים ${(s_t^x)}_d^c = {(s_d^c)}_{t_d^c}^x$.
	את הטענה נוכיח עם אינדוקציה על שמות עצם. \\
	נניח תחילה ש־$s \in \operatorname{Var}$, ונניח ש־$s \ne x$, אז $s^x_t = s$ וכן ולכן ${(s_t^x)}_d^c = {(s_d^c)}_{t_d^c}^x$ מחישוב ישיר בהתאם להגדרות. \\
	נניח אם כן ש־$s = x$, ואז נובע $s_t^x = t$ ולכן האגף השמאלי הוא $t_d^c$, האגף הימני מקיים $s_d^c = s$ ולכן נקבל גם $t_d^c$ והשוויון עדיין חל. \\
	נניח אם כן ש־$s \in \operatorname{Const}_{L_{P, f}}$, ונבחן את המקרה $s \ne c$, במקרה זה $s_t^x = s$ וכן $s_d^c = s$ גם כן, ומהצד השני מאותם השיקולים נקבל את $s$ גם. \\
	נניח ש־$s = c$, לכן $s_d^c = d$ וכן $s_t^x = s$ ונובע השוויון גם כן. \\
	השלמנו בסיס למהלך האינדוקטיבי ולכן נניח עתה $s = F(s_0, \dots, s_{n - 1})$ עבור $F$ סימן פונקציה $n$־מקומי ב־$L_{P, f}$ וכן $s_0, \dots, s_{n - 1} \in \operatorname{term}_{L_{P, f}}$. \\
	נניח את מהלך האינדוקציה על $s_0, \dots, s_{n - 1}$, ומהגדרת ההחלפה עבור סימני פונקציה נובע
	\begin{align*}
		{(s_t^x)}_d^c
		& = {(F_t^x(s_0, \dots, s_{n - 1}))}_d^c \\
		& = {(F({(s_0)}_t^x, \dots, {(s_{n - 1})}_t^x))}_d^c \\
		& = F({({(s_0)}_t^x)}_d^c, \dots, {({(s_{n - 1})}_t^x)}_d^c) \\
		& = F({({(s_0)}_d^c)}_{t_d^c}^x, \dots, {({(s_0)}_d^c)}_{t_d^c}^x) \\
		& = {(s_d^c)}_{t_d^c}^x
	\end{align*}
	והשלמנו את מהלך האינדוקציה, לכן הטענה תקפה.

	נעבור להוכחת הטענה הראשית שלנו, נעשה זאת באינדוקציה על מבנה הנוסחה. \\
	עבור בסיס האינדוקציה נניח $\varphi = R(s_0, \dots, s_{n - 1})$ כאשר $R \in \operatorname{rel}_{n, L_{P, f}}$.
	במקרה זה כמובן מהטענה אודות שמות עצם והגדרת ההחלפה עבור סימני יחס השוויון נובע ישירות, ולכן השלמנו את הבסיס ונוכל לעבור להוכחת מהלך האינדוקציה. \\
	אם הטענה נכונה עבור $\varphi, \phi$ אז היא נכונה עבור $\lnot \varphi$ וכן עבור $(\varphi \square \phi)$ לכל $\square \in \Bb$ מהגדרת ההחלפה (במקרים אלה ההגדרה אלמנטרית ולכן הטענה נובעת ישירות). \\
	נניח אם כן ש־$\psi = \forall v \varphi$ כך ש־$\varphi$ מקיימת את הנחת האינדוקציה, ונניח $v \ne x$.
	במקרה זה ההחלפה היא אלמנטרית מהגדרתה ומתקיים
	\[
		{({(\forall v \varphi)}_t^x)}_d^c
		= \forall v {(\varphi_t^x)}_d^c
		= \forall v {(\varphi_d^c)}_{t_d^c}^x
		= {({(\forall v \varphi)}_d^c)}_{t_d^c}^x
	\]
	נותר לבדוק את המקרה $x = v$.
	במקרה זה ההחלפה מוגדרת באופן מנוון, ולכן הטענה נובעת באופן ישיר, ולכן השלמנו את מהלך האינדוקציה.
\end{proof}

\subquestion{}
נסיק שאם $c$ אינו מופיע ב־$\varphi$ אז ${(\varphi_c^x)}_d^c = \varphi_d^x$.
\begin{proof}
	נגדיר $t = c$, וכן מהעובדה ש־$c$ לא מופיע ב־$\varphi$ נסיק ש־$\varphi_d^c = \varphi$, וכן מהגדרת $t$ גם $t_d^c = d$.
	לכן מהסעיף הקודם נובע
	\[
		{(\varphi_t^x)}_d^c
		= {(\varphi_c^x)}_d^c
		= {(\varphi_d^c)}_d^x
		= {(\varphi)}_d^x
	\]
\end{proof}

\subquestion{}
נוכיח שאם $x$ לא מופיע ב־$\varphi$ אז ${(\varphi_x^c)}_d^x = \varphi_d^c$.
\begin{proof}
	נצטרך להוכיח את הטענה באופן דומה להוכחת סעיף א', כלומר נוכיח שהטענה נכונה עבור שמות עצם ואז שהיא נכונה עבור נוסחות.
	נעיר שאפשרי להוכיח גם על־ידי יצירת שפה חדשה בה $x$ הוא קבוע ו־$c$ משתנה ואז לקבל את התוצאה מסעיף ב', אך אז תושאר לנו ההוכחה שנוסחות משתמרות בין השפות תחת ההגבלות המתאימות.

	נניח ש־$s \in \operatorname{Var}$, אז $s \ne x$ מהנתון ולכן מבדיקה ישירה הטענה מתקיימת. \\
	נניח ש־$s \in \operatorname{const}_{L_f, P}$ ולכן אם $s = c$ אז $s_x^c = x$ ולכן האגף השמאלי הוא $d$ וכך גם הימני, ואם $s \ne c$ לא מתבצעות כלל החלפות והשוויון עדיין חל. \\
	השלמנו בסיס אינדוקציה עבור הוכחה באינדוקציה על שמות עצם, ולכן נשאר להראות שהטענה נכונה גם עבור סימני פונקציה, אך ממהלך זהה לסעיף א' נקבל בדיוק את המבוקש, ולכן הטענה חלה על שמות עצם.

	נעבור אם כן להוכחה על נוסחות.
	גם במקרה זה ההוכחה עבור נוסחות יסודיות היא זהה למהלך סעיף א', וכן גם עבור יחס חד־מקומי וכלל הדו־מקומיים, ועלינו לבחון את המקרה של $\forall, \exists$. \\
	נניח ש־$\varphi$ מקיים את הנחת האינדוקציה ונבחן את $\psi = \forall v \varphi$, אז מהנתון $x$ לא מופיע ב־$\varphi$ וכן $v \ne x$, לכן מהגדרת הצבה נובע
	\[
		{(\psi_x^c)}_d^x
		= {({(\forall v \varphi)}_x^c)}_d^x
		= {(\forall v \varphi_x^c)}_d^x
		= \forall v {(\varphi_x^c)}_d^x
		= \psi_d^c
	\]
	וההוכחה ל־$\exists$ זהה, וסיימנו את מהלך האינדוקציה.
\end{proof}

\end{document}
