\input{../article_base.tex}
\title{פתרון מטלה 08 --- מבוא ללוגיקה, 80423}

\begin{document}
\maketitle
\maketitleprint{}

\question{}
תהי $L$ שפה לתחשיב יחסים, תהי $\varphi$ נוסחה ונניח ש־$x \in Var$.

\subquestion{}
נוכיח שלכל מבנה $\mathcal{A}$ ל־$L$ ולכל השמה $\sigma : Var \to A$ מתקיים $\mathcal{A} \models \varphi(\sigma)$, אם ורק אם לכל מבנה והשמה כאלה מתקיים $\mathcal{A} \models \forall x \varphi(\sigma)$.
\begin{proof}
	נניח את הכיוון הראשון, נקבע $\mathcal{A}$ כלשהו ונבחין כי $\mathcal{A} \models \varphi(\sigma)$ לכל הצבה $\sigma$ כזו.
	לכן בפרט לכ הצבה, גם $\mathcal{A} \models \varphi(\sigma[x : a])$ לכל $a \in A$.
	אבל במצב זה נבחין כי לכל $a \in A$ הטענה מתקיימת, כלומר $\mathcal{A} \models \forall x \varphi(\sigma)$, ומצאנו כי הטענה אכן חלה.

	לכיוון ההפוך נקבע שוב $\mathcal{A}$ כזה המקיים את הטענה והפעם נקבל שאם $\mathcal{A} \models \forall x \varphi(\sigma)$ אז בפרט לכל $a \in A$ מתקיים $\mathcal{A} \models \varphi(\sigma[x : a])$.
	נוכל אם כן לבנות כל $\sigma : Var \to A$ כך ש־$\mathcal{A} \models \varphi(\sigma)$.
\end{proof}

\subquestion{}
נוכיח שלכל מבנה $\mathcal{A}$ ל־$L$ ולכל השמה $\sigma : Var \to A$ מתקיים $\mathcal{A} \models \varphi(\sigma)$ אם ורק אם לכל הכללה $\psi$ של $\varphi$ ולכל מבנה $\mathcal{A}$ ל־$L$ מתקיים $\mathcal{A} \models \psi$.
\begin{proof}
	נוכיח את הטענה באינדוקציה. \\
	נבחין כי בסיס האינדוקציה הוא למעשה טענת הסעיף הקודם, ולכן נסיק שהיא אכן חלה. \\
	נניח ש־$FV(\varphi) = \{ x_0, \dots, x_{n - 1} \}$ וכן ש־$\psi = \forall x_0 \dots \forall x_{n - 2} \varphi(x_0, \dots, x_{n - 1})$ ושהטענה חלה עבור פסוקים אלה, ונבחן את $\phi = \forall x_{n - 1} \psi(x_{n - 1})$.
	אז מאותה הוכחה של סעיף א' נובע שהטענה מתקיימת עבור $\phi$ ביחס ל־$\psi$ ולכן השלמנו את מהלך האינדוקציה.
\end{proof}

\question{}
תהי $L = \{ p_0, \dots, p_{n - 1} \}$ שפה לתחשיב פסוקים, $\alpha \in form_L$. \\
תהי $L'$ שפה לתחשיב יחסים ו־$\varphi_0, \dots, \varphi_{n - 1} \in form_{L'}$. \\
תהי $\alpha_{\varphi_0, \dots, \varphi_{n - 1}}^{p_0, \dots, p_{n - 1}}$ נוסחה המתקבלת מהחלפת כל מופע של $p_i$ ב־$\varphi_i$ בו־זמנית.

\subquestion{}
נוכיח שזוהי אכן נוסחה.
\begin{proof}
	נוכיח באינדוקציה על מבנה הפסוק בתחשיב פסוקים. \\
	עבור הבסיס נניח ש־$\alpha = p_i$ עבור $i \in [n]$, ולכן מההגדרה $\alpha_{\varphi_0, \dots, \varphi_{n - 1}}^{p_0, \dots, p_{n - 1}} = \varphi_i$ וזוהי כמובן נוסחה. \\
	נניח שהטענה מתקיימת עבור $\alpha$ ונבחן את $(\lnot \alpha)$. נניח $\alpha_{\varphi_0, \dots, \varphi_{n - 1}}^{p_0, \dots, p_{n - 1}} = \psi$,
	ולכן מההגדרה ${(\lnot \alpha)}_{\varphi_0, \dots, \varphi_{n - 1}}^{p_0, \dots, p_{n - 1}} = (\lnot \psi)$ וזוהי כמובן נוסחה. \\
	באופן דומה אם $\alpha, \beta$ מקיימות את הטענה אז קיימות החלפות $\psi_0, \psi_1$ בהתאמה עבורן, וברור ש־$(\psi_0 \square \psi_1)$ נוסחה לכל $\square \in \mathcal{B}$,
	אבל זוהי גם תוצאת ההחלפה של $(\alpha \square \beta)$, ולכן השלמנו את מהלך האינדוקציה והטענה אכן מתקיימת.
\end{proof}

\subquestion{}
נוכיח שאם $\alpha$ טאוטולוגיה אז גם $\alpha_{\varphi_0, \dots, \varphi_{n - 1}}^{p_0, \dots, p_{n - 1}}$ היא טאוטולוגיה כנוסחה ב־$L$.
\begin{proof}
	נבחין כי יש משמעות לשאילת שאלה זו בשל תוצאת הסעיף הקודם.
	נניח ש־$f : form_L \to form_{L'}$ ההחלפה שהגדרנו קודם לכן, ונגדיר גם $g : form_{L'} \to form_{L_{prop}'}$ הבנייה שהגדרנו בהרצאה להחלפת נוסחות יסודיות.
	נבחין ש־$g \circ f$ היא פונקציה $form_L \to form_{L_{prop}'}$ פונקציית החלפה בין שפות בתחשיב פסוקים המקיימות את טענת שאלה 1 במטלה 3, לכן הרכבה זו משמרת שקילות טאוטולוגית.
	כלומר אם $\alpha$ טאוטולוגיה אז גם $(g \circ f)(\alpha)$ כפי שרצינו להראות.
\end{proof}

\subquestion{}
נסיק שנוסחה בשפה לתחשיב יחסים היא טאוטולוגיה אם ורק אם היא מהצורה $\alpha_{\varphi_0, \dots, \varphi_{n - 1}}^{p_0, \dots, p_{n - 1}}$ עבור טאוטולוגיה $\alpha$ ושפה כלשהי לתחשיב פסוקים $L'$.
\begin{proof}
	נניח את הכיוון הראשון ולכן משאלה 1 במטלה 3 נוכל להחליף את פסוקיה היסודיים בכל נוסחה תקינה על־פי המוגדר ונקבל נוסחה שהיא טאוטולוגיה מעל תחשיב פסוקים.

	נקבל נוסחה שהיא תוצאת החלפה עבור של טאוטולוגיה נסיק מהסעיף הקודם את המבוקש.
\end{proof}

\question{}
תהי שפה $L$ לתחשיב פסוקים ויהיו $\psi_0, \psi_1 \in form_L$, נוכיח שאם $\vdash \psi_0$ וגם $\vdash (\psi_0 \to \psi_1)$ אז $\vdash \psi_1$.
\begin{proof}
	נתון כי קיים עץ היסק עבור $\psi_0, (\psi_0 \to \psi_1)$, עץ זה הוא סופי ואנו יכולים לשרשר אותו לתוך עצים אחרים, אז נבנה את עץ ההיסק
	\begin{enumerate}
		\item $\lnot \psi_1$
		\item פיצול למקרים על $\psi_0$
			\begin{enumerate}
				\item $\psi_0$
				\item פיצול למקרים על $(\psi_0 \to \psi_1)$
					\begin{enumerate}
						\item $(\psi_0 \to \psi_1)$
						\item $\psi_1$, כלל היסק לגרירה (מודוס פוננס) וסתירה
					\end{enumerate}
					\begin{enumerate}
						\item $\lnot (\psi_0 \to \psi_1)$
						\item חזרה על כלל העץ עבור $(\psi_0 \to \psi_1)$, למעשה כל מה שמופיע החל מפה יופיע כהמשכים של כלל העלים בעץ הזה, מטעמי נוחות לא נכתוב זאת כך
						\item $(\psi_0 \to \psi_1)$ וסתירה
					\end{enumerate}
			\end{enumerate}
			\begin{enumerate}
				\item $\lnot \psi_0$
				\item חזרה על כלל העץ עבור $\psi_0$, למעשה כל מה שמופיע החל מפה יופיע כהמשכים של כלל העלים בעץ הזה, מטעמי נוחות לא נכתוב זאת כך
				\item $\psi_0$ וסתירה
			\end{enumerate}
	\end{enumerate}
	הגענו לסתירה בכל ענף ולכן עץ היסק זה מעיד על $\vdash \psi_1$.
\end{proof}

\question{}
תהי $L$ שפה לתחשיב פסוקים ויהיו $\psi_0, \psi_1, \psi_2 \in form_L$, בסעיפים הבאים נכתוב עצי היסק במערכת ההיסק KEP עבור כל טענה.

\subquestion{}
$\psi_0 \vdash (\psi_0 \lor \psi_1)$.
\begin{solution}
	נבנה את עץ ההיסק המתאים.
	\begin{enumerate}
		\item $\lnot (\psi_0 \lor \psi_1)$
		\item $\lnot \psi_0$, כללי איווי
		\item $\psi_0$, הוספת הנחה, וסתירה
	\end{enumerate}
\end{solution}

\subquestion{}
$(\psi_0 \lor \psi_1) \vdash (\psi_1 \lor \psi_0)$.
\begin{solution}
	נבנה את עץ ההיסק המתאים.
	\begin{enumerate}
		\item $\lnot (\psi_1 \lor \psi_0)$
		\item $\lnot \psi_0$, כללי איווי
		\item $(\psi_0 \lor \psi_1)$, הוספת הנחה
		\item $\psi_0$, כללי איווי וסתירה
	\end{enumerate}
	נבחין כי יכולנו גם לפצל למקרים על ערך $\psi_0$ ו־$\psi_1$ כדי לבנות עץ היסק שמתיישב יותר טוב עם הדרך שבה אנו מוכיחים.
\end{solution}

\subquestion{}
$((\psi_0 \lor \psi_1) \lor \psi_2) \vdash (\psi_0 \lor (\psi_1 \lor \psi_2))$.
\begin{solution}
	נבנה את עץ ההיסק המתאים.
	\begin{enumerate}
		\item $\lnot (\psi_0 \lor (\psi_1 \lor \psi_2))$
		\item $\lnot (\psi_1 \lor \psi_2)$, כללי איווי
		\item $\lnot \psi_2$, כללי איווי
		\item $((\psi_0 \lor \psi_1) \lor \psi_2)$, הוספת הנחה
		\item $\psi_2$, כללי איווי, וסתירה
	\end{enumerate}
\end{solution}

\subquestion{}
$((\psi_0 \land \psi_1) \land \psi_2) \vdash (\psi_0 \land (\psi_1 \land \psi_2))$.
\begin{solution}
	נבנה את עץ ההיסק המתאים.
	\begin{enumerate}
		\item $\lnot (\psi_0 \land (\psi_1 \land \psi_2))$
		\item $(\psi_0 \land \psi_1) \land \psi_2$, הוספת הנחה
		\item $\psi_2$, כללי גימום
		\item פיצול למקרים $\psi_0$
			\begin{enumerate}
				\item $\psi_0$
				\item $\lnot (\psi_1 \land \psi_2)$, כללי גימום
				\item פיצול למקרים $\psi_1$
					\begin{enumerate}
						\item $\psi_1$
						\item $\lnot \psi_2$, כללי גימום וסתירה
					\end{enumerate}
					\begin{enumerate}
						\item $\lnot \psi_1$
						\item $(\psi_0 \land \psi_1)$ כללי גימום מ־2
						\item $\psi_1$, כללי גימום, וסתירה
					\end{enumerate}
			\end{enumerate}
			\begin{enumerate}
				\item $\lnot \psi_0$
				\item $\psi_0 \land \psi_1$, כללי גימום מ־2
				\item $\psi_0$, כללי גימום, סתירה
			\end{enumerate}
	\end{enumerate}
\end{solution}

\subquestion{}
$\vdash (((\psi_0 \lor \psi_1) \land \psi_2) \leftrightarrow ((\psi_0 \land \psi_2) \lor (\psi_1 \land \psi_2)))$.
\begin{solution}
	נבנה את עץ ההיסק המתאים.
	\begin{enumerate}
		\item $\lnot (((\psi_0 \lor \psi_1) \land \psi_2) \leftrightarrow ((\psi_0 \land \psi_2) \lor (\psi_1 \land \psi_2)))$.
		\item פיצול למקרים $((\psi_0 \lor \psi_1) \land \psi_2)$
			\begin{enumerate}
				\item $((\psi_0 \lor \psi_1) \land \psi_2)$
				\item $\psi_2$
				\item $\lnot ((\psi_0 \land \psi_2) \lor (\psi_1 \land \psi_2))$, כללי גרירה דו־כיוונית
				\item $\lnot (\psi_0 \land \psi_2)$
				\item פיצול למקרים על $\psi_0$
					\begin{enumerate}
						\item $\psi_0$
						\item $\lnot \psi_2$, כללי גימום, וסתירה
					\end{enumerate}
					\begin{enumerate}
						\item $\lnot \psi_0$
						\item $\psi_0 \lor \psi_1$, כללי גימום מ־a
						\item $\psi_1$, כללי איווי
						\item $\lnot (\psi_1 \land \psi_2)$, כללי איווי
						\item $\lnot \psi_2$, כללי גימום, סתירה
					\end{enumerate}
			\end{enumerate}
			\begin{enumerate}
				\item $\lnot ((\psi_0 \lor \psi_1) \land \psi_2)$
				\item $\lnot (\psi_0 \lor \psi_1)$, כללי גימום
				\item $\lnot \psi_0$, כללי איווי
				\item $(\psi_0 \land \psi_2) \lor (\psi_1 \land \psi_2)$, כללי גרירה דו־כיוונית
				\item פיצול למקרים על $(\psi_0 \land \psi_2)$
					\begin{enumerate}
						\item $\psi_0 \land \psi_2$
						\item $\psi_0$, כללי גימום, סתירה
					\end{enumerate}
					\begin{enumerate}
						\item $\lnot (\psi_0 \land \psi_2)$
						\item $\psi_1 \land \psi_2$, כללי איווי
						\item $\psi_1$, כללי גימום
						\item $\lnot \psi_1$, כללי איווי ל־b, וסתירה
					\end{enumerate}
			\end{enumerate}
	\end{enumerate}
\end{solution}

\subquestion{}
$(\psi_0 \to \psi_1), (\psi_1 \to \psi_0) \vdash (\psi_0 \leftrightarrow \psi_1)$.
\begin{solution}
	נבנה את עץ ההיסק המתאים.
	\begin{enumerate}
		\item $\lnot (\psi_0 \leftrightarrow \psi_1)$
		\item פיצול למקרים על $\psi_0$
			\begin{enumerate}
				\item $\psi_0$
				\item $\lnot \psi_1$, כללי גרירה דו־כיוונית
				\item $\psi_0 \to \psi_1$, הוספת הנחה
				\item $\psi_1$, כללי גרירה, סתירה
			\end{enumerate}
			\begin{enumerate}
				\item $\lnot \psi_0$
				\item $\psi_1$, כללי גרירה דו־כיוונית
				\item $\psi_1 \to \psi_0$, הוספת הנחה
				\item $\lnot \psi_1$, חוקי גרירה, סתירה
			\end{enumerate}
	\end{enumerate}
\end{solution}

\subquestion{}
$\vdash ((\psi_0 \land (\lnot \psi_0)) \to (\psi_1 \land (\lnot \psi_1)))$.
\begin{solution}
	נבנה את עץ ההיסק המתאים.
	\begin{enumerate}
		\item $\lnot ((\psi_0 \land (\lnot \psi_0)) \to (\psi_1 \land (\lnot \psi_1)))$
		\item $\psi_0 \land (\lnot \psi_0)$, חוקי גרירה
		\item $\psi_0$, חוקי גימום
		\item $\lnot \psi_0$, חוקי גימום, סתירה
	\end{enumerate}
\end{solution}

\subquestion{}
$\vdash (\psi_0 \to (\psi_1 \to \psi_0))$.
\begin{solution}
	נבנה את עץ ההיסק המתאים.
	\begin{enumerate}
		\item $\lnot (\psi_0 \to (\psi_1 \to \psi_0))$
		\item $\psi_0$, כללי גרירה
		\item $\lnot (\psi_1 \to \psi_0)$, כללי גרירה ל־1
		\item $\lnot \psi_0$, כללי גרירה, וסתירה
	\end{enumerate}
\end{solution}

\subquestion{}
$\vdash (((\lnot \psi_0) \to (\lnot \psi_1)) \to (\psi_1 \to \psi_0))$.
\begin{solution}
	נבנה את עץ ההיסק המתאים.
	\begin{enumerate}
		\item $\lnot (((\lnot \psi_0) \to (\lnot \psi_1)) \to (\psi_1 \to \psi_0))$
		\item $(\lnot \psi_0) \to (\lnot \psi_1)$, כללי גרירה
		\item $\lnot (\psi_1 \to \psi_0)$, כללי גרירה ל־1
		\item $\psi_1$, כללי גרירה
		\item $\lnot \psi_0$, כללי גרירה
		\item $\lnot \psi_1$, כללי גרירה ל־2, וסתירה
	\end{enumerate}
\end{solution}

\subquestion{}
$\vdash ((\psi_0 \to (\psi_1 \to \psi_2)) \to ((\psi_0 \to \psi_1) \to (\psi_0 \to \psi_2)))$.
\begin{solution}
	נבנה את עץ ההיסק המתאים.
	\begin{enumerate}
		\item $\lnot ((\psi_0 \to (\psi_1 \to \psi_2)) \to ((\psi_0 \to \psi_1) \to (\psi_0 \to \psi_2)))$
		\item $\psi_0 \to (\psi_1 \to \psi_2)$, חוקי גרירה
		\item $\lnot ((\psi_0 \to \psi_1) \to (\psi_0 \to \psi_2))$, חוקי גרירה ל־1
		\item $\psi_0 \to \psi_1$, חוקי גרירה
		\item $\lnot (\psi_0 \to \psi_2)$, חוקי גרירה
		\item $\psi_0$, חוקי גרירה
		\item $\lnot \psi_2$, חוקי גרירה
		\item $\psi_1$, חוקי גרירה ל־4
		\item $\psi_1 \to \psi_2$, חוקי גרירה ל־2
		\item $\psi_2$, חוקי גרירה, וסתירה
	\end{enumerate}
\end{solution}

\question{}
נאמר שכלל היסק ניתן להשמטה אם כל שפה $L$ לתחשיב פסוקים ולכל קבוצת פסוקים $\Sigma$ ופסוק $\varphi$ כך ש־$\Sigma \vdash \varphi$ קיים עץ היסק לטענה כך שהכלל אינו מופיע בה, לכל כלל בסעיפים הבאים נוכיח שהוא ניתן להשמטה.

\subquestion{}
$\frac{(A \to B), (\lnot B)}{(\lnot A)}$
\begin{proof}
	כדי להראות שכלל היסק ניתן להשמטה די שנראה שבכל עץ בו הוא מופיע, ניתן לבנות עץ חדש ללא הכלל, כך שתוצאתו תמשיך להיות תקפה.
	לשם כך אנו נניח שישנו עץ היסק בו יש שימוש בטענה זו, ועתה נבנה עץ שיחליף את העץ הזה ושמשתמש בכללי ההיסק הנתונים לנו כרגע
	\begin{enumerate}
		\item $A \to B$, כלל החזרה
		\item חלוקה למקרים על $A$
			\begin{enumerate}
				\item $A$
				\item $B$, כללי גרירה ל־1
				\item $\lnot B$, כלל החזרה, וסתירה
			\end{enumerate}
			\begin{enumerate}
				\item $\lnot A$
				\item נקודת ההחלפה השנייה
			\end{enumerate}
	\end{enumerate}
	מצאנו עץ היסק שניתן להחליף את כלל ההיסק הרצוי בו, כך שהטענות נשארות ללא שינוי, נבחין שוב כי זוהי פעולת החלפה עבור עצים בינאריים, וכי היא תקפה, בסעיפים הבאים נשתמש באותה הטענה בדיוק, אך ללא הסבר זה
	נקודת ההחלפה השנייה היא כלל חלקי העץ שמגעים אחרי ההיסק שהחלפנו, צלע זו תוחלף בו, וכך יתקבל עץ היסק מלא כך שאכן יש סתירה בעל ענף.
\end{proof}

\subquestion{}
$\frac{(A \leftrightarrow B), A}{B}$
\begin{proof}
	נבנה את חלק עץ ההיסק להחלפה
	\begin{enumerate}
		\item $A \leftrightarrow B$, כלל החזרה
		\item $A$, כלל החזרה
		\item פיצול למקרים על $B$
			\begin{enumerate}
				\item $B$
				\item נקודת ההחלפה השנייה
			\end{enumerate}
			\begin{enumerate}
				\item $\lnot B$
				\item $\lnot A$, כללי הגרירה הדו־כיוונית ל־1, וסתירה
			\end{enumerate}
	\end{enumerate}
\end{proof}

\subquestion{}
$\frac{(A \leftrightarrow B), (\lnot B)}{(\lnot A)}$
\begin{proof}
	גם הפעם נבנה את עץ ההיסק המחליף
	\begin{enumerate}
		\item $A \leftrightarrow B$, כלל החזרה
		\item $\lnot B$, כלל החזרה
		\item פיצול למקרים על $A$
			\begin{enumerate}
				\item $A$
				\item $B$, כללי גרירה דו־כיוונית ל־1, וסתירה
			\end{enumerate}
			\begin{enumerate}
				\item $\lnot A$
				\item נקודת ההחלפה השנייה
			\end{enumerate}
	\end{enumerate}
\end{proof}

\end{document}
