\documentclass[a4paper]{article}

% packages
\usepackage{inputenc, fontspec, amsmath, amsthm, amsfonts, amssymb, luacode, catchfile, tikzducks, hyperref}
\usepackage[a4paper, margin=50pt, includeheadfoot]{geometry} % set page margins
\usepackage[shortlabels]{enumitem}
\usepackage[skip=3pt, indent=0pt]{parskip}

% language
\usepackage[bidi=basic, layout=tabular, provide=*]{babel}
\babelprovide[main, import]{hebrew}
\babelprovide{rl}
\babelfont{rm}{Libertinus Serif}
\babelfont{sf}{Libertinus Sans}
\babelfont{tt}{Libertinus Mono}

% style
\AddToHook{cmd/section/before}{\clearpage}	% Add line break before section
\linespread{1.3}
\setcounter{secnumdepth}{0}		% Remove default number tags from sections, this won't do well with theorems
\AtBeginDocument{\setlength{\belowdisplayskip}{3pt}}
\AtBeginDocument{\setlength{\abovedisplayskip}{3pt}}

% operators
\DeclareMathOperator\cis{cis}
\DeclareMathOperator\Sp{Sp}
\DeclareMathOperator\tr{tr}
\DeclareMathOperator\im{Im}
\DeclareMathOperator\re{Re}
\DeclareMathOperator\diag{diag}
\DeclareMathOperator*\lowlim{\underline{lim}}
\DeclareMathOperator*\uplim{\overline{lim}}
\DeclareMathOperator\rng{rng}
\DeclareMathOperator\Sym{Sym}

% commands
%\renewcommand\qedsymbol{\textbf{מש''ל}}
%\renewcommand\qedsymbol{\fbox{\emoji{lizard}}}
\newcommand{\NN}[0]{\mathbb{N}}
\newcommand{\ZZ}[0]{\mathbb{Z}}
\newcommand{\QQ}[0]{\mathbb{Q}}
\newcommand{\RR}[0]{\mathbb{R}}
\newcommand{\CC}[0]{\mathbb{C}}
\newcommand{\FF}[0]{\mathbb{F}}
\newcommand{\PP}[0]{\mathbb{P}}
\newcommand{\TT}[0]{\mathbb{T}}
\newcommand{\acts}[0]{\circlearrowright}
\newcommand{\explain}[2] {
	\begin{flalign*}
		 && \text{#2} && \text{#1}
	\end{flalign*}
}
\newcommand{\maketitleprint}[0]{ \begin{center}
	\begin{tikzpicture}[scale=3]
		\duck[graduate=gray!20!black, tassel=red!70!black]
	\end{tikzpicture}	
\end{center}
}

% theorem commands
\newtheoremstyle{c_remark}
	{}	% Space above
	{}	% Space below
	{}% Body font
	{}	% Indent amount
	{\bfseries}	% Theorem head font
	{}	% Punctuation after theorem head
	{.5em}	% Space after theorem head
	{\thmname{#1}\thmnumber{ #2}\thmnote{ \normalfont{\text{(#3)}}}}	% head content
\newtheoremstyle{c_definition}
	{3pt}	% Space above
	{3pt}	% Space below
	{}% Body font
	{}	% Indent amount
	{\bfseries}	% Theorem head font
	{}	% Punctuation after theorem head
	{.5em}	% Space after theorem head
	{\thmname{#1}\thmnumber{ #2}\thmnote{ \normalfont{\text{(#3)}}}}	% head content
\newtheoremstyle{c_plain}
	{3pt}	% Space above
	{3pt}	% Space below
	{\itshape}% Body font
	{}	% Indent amount
	{\bfseries}	% Theorem head font
	{}	% Punctuation after theorem head
	{.5em}	% Space after theorem head
	{\thmname{#1}\thmnumber{ #2}\thmnote{ \text{(#3)}}}	% head content

\theoremstyle{c_plain}
\newtheorem{theorem}{משפט}[section]
\newtheorem{lemma}[theorem]{למה}
\newtheorem{proposition}[theorem]{טענה}
%\newtheorem{corollary}[theorem]{אין חלופה עברית}

\theoremstyle{c_definition}
\newtheorem{definition}[theorem]{הגדרה}
\newtheorem{example}{דוגמה}[section]
\newtheorem{exercise}{תרגיל}[section]

\theoremstyle{c_remark}
\newtheorem*{remark}{הערה}
\newtheorem*{solution}{פתרון}
\newtheorem{conclusion}[theorem]{מסקנה}
\newtheorem{notation}[theorem]{סימון}

%\ifthenelse{\equal{\directlua{tex.print(document_type)}}{notes}} { }{ }

\directlua{common = require ('../common')}

\GetEnv{AUTHOR}

% headers
\author{\AUTHOR}
\date\today
